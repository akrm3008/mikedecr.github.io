<!DOCTYPE html>
<html lang="en-us">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="PhD Candidate, Political Science, University of Wisconsin–Madison">
<meta name="keywords" content="[political science wisconsin]">

<base href="/">

<title>Michael DeCrescenzo</title>

<meta name="generator" content="Hugo 0.31.1" />





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/main.css">




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-us">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Day 1: Data in R</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
        UPDATED JAN 1, 2018 
      
      
      
      —
      
      
      <a class="meta" href="/categories/r">R</a>, 
      
      <a class="meta" href="/categories/teaching">TEACHING</a>, 
      
      <a class="meta" href="/categories/ps811">PS811</a>
      
      
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    <div id="sarah" class="section level1">
<h1>Sarah</h1>
<ul>
<li>setting up a project</li>
<li>task-devoted scripts
<ul>
<li>cleaning</li>
<li>exploratory analysis</li>
<li>polished exploratory graphics</li>
<li>models</li>
<li>post-estimation graphics</li>
</ul></li>
<li>don’t ever attach</li>
<li>packages, masking names</li>
<li>pseudo-code</li>
<li>data management</li>
<li>loading datasets
<ul>
<li><em>foreign vs haven, base vs. readr, readxl (is that right?)</em></li>
</ul></li>
<li>Creating new variables</li>
<li>dropping and keeping variables</li>
<li>missing data</li>
<li>merging and combining</li>
<li>appending</li>
<li>merging</li>
<li>reshaping</li>
<li>long and wide</li>
<li>aggregating/collapsing</li>
<li>saving transformed data</li>
<li><em>for later use! eg if you want to do a state analysis from lower data</em></li>
<li>intermediate logical functions</li>
<li>vector <code>ifelse()</code> and atomic <code>if (condition &amp;&amp; condition) {this} else {that}</code></li>
<li><code>case_when()</code> for when you have lots of things you want to check, and the <code>ifelse()</code> idea gets too bloaty</li>
<li>looping
<ul>
<li><em>You can</em></li>
<li><em>You shouldn’t</em></li>
</ul></li>
<li>apply functions
<ul>
<li>here’s a list of elements</li>
<li>perform function on every element individually</li>
</ul></li>
<li>what sarah does not have</li>
<li>tidy data
<ul>
<li><a href="https://www.jstatsoft.org/article/view/v059i10" class="uri">https://www.jstatsoft.org/article/view/v059i10</a></li>
</ul></li>
<li>tidyverse
<ul>
<li>make untidy data tidy with <code>tidyr</code> (hadley): <a href="https://blog.rstudio.com/2014/07/22/introducing-tidyr/" class="uri">https://blog.rstudio.com/2014/07/22/introducing-tidyr/</a></li>
<li>manipulate tidy data with <code>dplyr</code></li>
<li>why dplyr: <a href="https://rpubs.com/justmarkham/dplyr-tutorial" class="uri">https://rpubs.com/justmarkham/dplyr-tutorial</a></li>
<li>how i learned: <a href="https://rpubs.com/bradleyboehmke/data_wrangling" class="uri">https://rpubs.com/bradleyboehmke/data_wrangling</a></li>
</ul></li>
<li>manipulating strings and factors</li>
<li>Tidy</li>
<li>now when I see base code, I see a wall of gibberish</li>
<li>it’s a <em>wall</em> because there is so much</li>
<li>it’s gibberish because it isn’t fucking readable
<ul>
<li>nested</li>
<li>the syntax itself requires translation.</li>
<li>tidy verbs mean what they say</li>
</ul></li>
<li>what I should change</li>
<li>directory management</li>
</ul>
<p>best practices:</p>
<ul>
<li>Explicit is always better than implicit</li>
<li>some elements have names. Always better to refer to them by name than by number. Don’t just grab rows by number. Grab the rows by logic. Grab rows where column is something something.</li>
<li>Rely on permanent features of the data rather than happenstance features: Call something by a column name, not the column number</li>
<li>Close R and re-run often</li>
<li>set up a comment style hierarchy (organization)</li>
</ul>
</div>
<div id="getting-started-with-a-project" class="section level1">
<h1>Getting started with a project</h1>
<p>set up a project folder</p>
<ul>
<li>directory logic:</li>
<li>data, code, documentation, literature,</li>
<li>paper, graphics, tables, other generated quantities</li>
</ul>
<p>Get mentally prepared for the idea of keeping code in separate documents</p>
<ul>
<li>results of one file get exported so the next file can use them</li>
</ul>
</div>
<div id="setting-a-directory" class="section level1">
<h1>Setting a directory</h1>
<p>Where are we in your computer? This is how R finds folders and files</p>
<ul>
<li>not very replicable</li>
<li>if you care about replication:</li>
<li>Rstudio project files</li>
<li>run R in the terminal</li>
</ul>
</div>
<div id="our-project-for-in-class" class="section level1">
<h1>Our project for in-class</h1>
<p>Anes</p>
<ul>
<li>should already download the ANES cumulative data file</li>
</ul>
<p>data lesson!</p>
</div>
<div id="data-frames" class="section level1">
<h1>Data frames</h1>
<div id="multiple-data-frames" class="section level2">
<h2>Multiple data frames</h2>
<p>create data frames for multiple years</p>
<p>or aggregate something quickly</p>
</div>
<div id="creating-data-frames" class="section level2">
<h2>Creating data frames</h2>
<p>not uncommon!</p>
</div>
</div>
<div id="the-tidyverse" class="section level1">
<h1>The tidyverse</h1>
<div id="packages" class="section level2">
<h2>Packages</h2>
</div>
<div id="piping" class="section level2">
<h2>Piping</h2>
</div>
</div>
<div id="reading-external-data" class="section level1">
<h1>Reading external data</h1>
</div>
<div id="modifying-existing-data" class="section level1">
<h1>Modifying existing data</h1>
<p>Principles?</p>
<ul>
<li>identifiers in variables</li>
<li>(no named vectors)</li>
<li>this is why I’ve stopped using <code>table()</code> or <code>tapply()</code> except for checking</li>
</ul>
<div id="handy-tools-for-different-data-types" class="section level2">
<h2>Handy tools for different data types</h2>
<p><code>stringr</code>, <code>forcats</code>, <code>case_when</code>, <code>ifelse()</code>, <code>seq()</code></p>
<p>time series (lag, lead)</p>
<ul>
<li>Time series is just hard and you’re going to spend a lot of time beating your head against a wall. There is nothing I can do to fix this. But here are some tools that you should check out to help you.</li>
<li>Fixing data:</li>
<li>stata has <code>tsset</code> and you feed it a date, maybe a group</li>
<li>dplyr: <code>group_by(whatever)</code>, <code>arrange(date)</code></li>
<li>lags and leads just work on rows, so it won’t <em>know</em> to grab the previous date</li>
<li><code>zoo</code>? Creates an index variable</li>
<li><code>xts</code> requires the index to be a date</li>
<li>lubridate for date/time modification</li>
<li>RcppRoll for rolling averages</li>
<li>tidyquant has period-level apply functions (apply something weekly, for example)</li>
</ul>
</div>
</div>
<div id="shaping-data" class="section level1">
<h1>Shaping data</h1>
</div>
<div id="analysis-routines" class="section level1">
<h1>Analysis routines</h1>
<div id="summarizing" class="section level2">
<h2>Summarizing</h2>
</div>
<div id="tabulating" class="section level2">
<h2>Tabulating</h2>
</div>
<div id="aggregating" class="section level2">
<h2>Aggregating</h2>
</div>
<div id="piping-1" class="section level2">
<h2>Piping</h2>
</div>
</div>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
      
      
      
    </h6>
  </div>
  
</section>








<section id="menu-pane" class="row menu text-center">
  
  
  <span><a class="menu-item" href="/811/811-basics/">&lt; prev | </a></span>
  
  
  <span><a class="menu-item" href="/811">811</a></span>
  
  
  <span><a class="menu-item" href="/811/811-graphics/"> | next &gt;</a></span>
  
  

  <section id="main-menu-pane" class="row text-center main-menu">
  <h4 class="text-center"><a class="menu-item" href="/">&nbsp;&nbsp;Home&nbsp;&nbsp;</a>
   
  <a class="menu-item" href="/about/">&nbsp;&nbsp;About&nbsp;&nbsp;</a>
  
  <a class="menu-item" href="/research/">&nbsp;&nbsp;Research&nbsp;&nbsp;</a>
  
  <a class="menu-item" href="/teaching/">&nbsp;&nbsp;Teaching&nbsp;&nbsp;</a>
  
  <a class="menu-item" href="/code/">&nbsp;&nbsp;Code&nbsp;&nbsp;</a>
  
  <a class="menu-item" href="/post/">&nbsp;&nbsp;Blog&nbsp;&nbsp;</a>
  
  <a class="menu-item" href="/contact/">&nbsp;&nbsp;Contact&nbsp;&nbsp;</a>
  </h4>
</section>
</section>




<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">© 2017 Michael DeCrescenzo. <a href="http://creativecommons.org/licenses/by/3.0/">Some rights reserved</a>.</h6>
  
  <h6 class="text-center powered">Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/shenoybr/hugo-goa">Goa</a>.</h6>
  
  
</footer>

</div>









<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


